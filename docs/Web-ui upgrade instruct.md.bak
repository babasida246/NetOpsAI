Dưới đây là prompt chi tiết cho GitHub Copilot (Claude Opus 4.5) để fix và nâng cấp giao diện Hospital IT Gateway:

```markdown
# HOSPITAL IT GATEWAY - UI MIGRATION & MODERNIZATION

## Context
Migrating from Argon Design System to Material Tailwind v2.x with modern Web 3.0 components. Current application is a Hospital IT Gateway with multiple modules: Dashboard, AI Chat, Routing Simulator, Tool Registry, Deployment Health, etc.

## Objectives
Completely refactor the UI/UX system with production-ready, accessible, and theme-customizable components following international UX/UI standards.

## Phase 1: Setup & Configuration

### 1.1 Install Dependencies
```bash
npm install @material-tailwind/react@latest
npm install tailwindcss@latest postcss autoprefixer
npm install @headlessui/react @heroicons/react
npm install zustand # for state management
npm install framer-motion # for animations
```

### 1.2 Create Tailwind Configuration (`tailwind.config.js`)

```javascript
const withMT = require("@material-tailwind/react/utils/withMT");

module.exports = withMT({
  content: [
    "./src/**/*.{js,jsx,ts,tsx}",
    "./node_modules/@material-tailwind/react/components/**/*.{js,ts,jsx,tsx}",
    "./node_modules/@material-tailwind/react/theme/components/**/*.{js,ts,jsx,tsx}",
  ],
  darkMode: 'class',
  theme: {
    extend: {
      colors: {
        // Custom color system
        primary: {
          50: 'var(--color-primary-50)',
          100: 'var(--color-primary-100)',
          200: 'var(--color-primary-200)',
          300: 'var(--color-primary-300)',
          400: 'var(--color-primary-400)',
          500: 'var(--color-primary-500)',
          600: 'var(--color-primary-600)',
          700: 'var(--color-primary-700)',
          800: 'var(--color-primary-800)',
          900: 'var(--color-primary-900)',
        },
        // Add secondary, accent, etc.
      },
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
    },
  },
  plugins: [
    require('@tailwindcss/forms'),
    require('@tailwindcss/typography'),
  ],
});
```

### 1.3 Create Global Styles (`src/styles/app.css`)

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Light Theme */
    --color-primary-50: #eff6ff;
    --color-primary-100: #dbeafe;
    --color-primary-500: #3b82f6;
    --color-primary-900: #1e3a8a;
    
    /* Semantic colors */
    --bg-primary: #ffffff;
    --bg-secondary: #f8fafc;
    --text-primary: #0f172a;
    --text-secondary: #475569;
    --border-color: #e2e8f0;
    
    /* Status colors */
    --color-success: #10b981;
    --color-warning: #f59e0b;
    --color-error: #ef4444;
    --color-info: #3b82f6;
  }

  .dark {
    /* Dark Theme */
    --color-primary-50: #1e3a8a;
    --color-primary-900: #dbeafe;
    
    --bg-primary: #0f172a;
    --bg-secondary: #1e293b;
    --text-primary: #f1f5f9;
    --text-secondary: #cbd5e1;
    --border-color: #334155;
  }

  body {
    @apply bg-[var(--bg-primary)] text-[var(--text-primary)] transition-colors duration-200;
  }
}

@layer components {
  /* Custom component classes */
  .card-elevated {
    @apply bg-[var(--bg-primary)] rounded-lg shadow-lg border border-[var(--border-color)];
  }
  
  .sidebar-item {
    @apply flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 
           hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer;
  }
  
  .sidebar-item-active {
    @apply bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400;
  }
}
```

## Phase 2: Create Theme System

### 2.1 Theme Store (`src/stores/themeStore.js`)

```javascript
import { create } from 'zustand';
import { persist } from 'zustand/middleware';

export const useThemeStore = create(
  persist(
    (set, get) => ({
      mode: 'light', // 'light' | 'dark'
      customColors: {
        primary: '#3b82f6',
        secondary: '#8b5cf6',
        accent: '#ec4899',
      },
      
      toggleMode: () => {
        const newMode = get().mode === 'light' ? 'dark' : 'light';
        set({ mode: newMode });
        document.documentElement.classList.toggle('dark', newMode === 'dark');
      },
      
      setCustomColor: (colorKey, value) => {
        set((state) => ({
          customColors: {
            ...state.customColors,
            [colorKey]: value,
          },
        }));
        // Apply to CSS variables
        document.documentElement.style.setProperty(`--color-${colorKey}`, value);
      },
      
      saveToDatabase: async (userId) => {
        const config = get();
        await fetch('/api/user-preferences', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            userId,
            theme: {
              mode: config.mode,
              colors: config.customColors,
            },
          }),
        });
      },
      
      loadFromDatabase: async (userId) => {
        const response = await fetch(`/api/user-preferences/${userId}`);
        const data = await response.json();
        if (data.theme) {
          set({
            mode: data.theme.mode,
            customColors: data.theme.colors,
          });
        }
      },
    }),
    {
      name: 'hospital-theme-storage',
    }
  )
);
```

### 2.2 Theme Customizer Component (`src/components/ThemeCustomizer.jsx`)

```jsx
import React, { useState } from 'react';
import {
  Dialog,
  DialogHeader,
  DialogBody,
  DialogFooter,
  Button,
  Switch,
  Input,
} from '@material-tailwind/react';
import { useThemeStore } from '../stores/themeStore';

export function ThemeCustomizer({ open, onClose }) {
  const { mode, customColors, toggleMode, setCustomColor, saveToDatabase } = useThemeStore();
  const [tempColors, setTempColors] = useState(customColors);

  const handleSave = async () => {
    Object.entries(tempColors).forEach(([key, value]) => {
      setCustomColor(key, value);
    });
    await saveToDatabase('current-user-id'); // Replace with actual user ID
    onClose();
  };

  return (
    <Dialog open={open} handler={onClose} size="md">
      <DialogHeader>Theme Customization</DialogHeader>
      <DialogBody className="space-y-6">
        {/* Dark Mode Toggle */}
        <div className="flex items-center justify-between">
          <span className="text-sm font-medium">Dark Mode</span>
          <Switch checked={mode === 'dark'} onChange={toggleMode} />
        </div>

        {/* Color Pickers */}
        <div className="space-y-4">
          <h3 className="text-sm font-semibold">Custom Colors</h3>
          {Object.entries(tempColors).map(([key, value]) => (
            <div key={key} className="flex items-center gap-4">
              <label className="text-sm capitalize w-24">{key}</label>
              <Input
                type="color"
                value={value}
                onChange={(e) => setTempColors({ ...tempColors, [key]: e.target.value })}
                className="h-10"
              />
              <Input
                type="text"
                value={value}
                onChange={(e) => setTempColors({ ...tempColors, [key]: e.target.value })}
                className="flex-1"
              />
            </div>
          ))}
        </div>
      </DialogBody>
      <DialogFooter>
        <Button variant="text" onClick={onClose} className="mr-2">
          Cancel
        </Button>
        <Button onClick={handleSave}>Save Theme</Button>
      </DialogFooter>
    </Dialog>
  );
}
```

## Phase 3: Refactor Components

### 3.1 Sidebar Navigation (`src/components/Sidebar.jsx`)

```jsx
import React from 'react';
import { useLocation, useNavigate } from 'react-router-dom';
import {
  Card,
  Typography,
  List,
  ListItem,
  ListItemPrefix,
} from '@material-tailwind/react';
import {
  ChatBubbleLeftRightIcon,
  ArrowPathIcon,
  WrenchScrewdriverIcon,
  ChartBarIcon,
  HeartIcon,
} from '@heroicons/react/24/outline';

const menuItems = [
  { title: 'Dashboard', path: '/dashboard', icon: ChartBarIcon },
  { title: 'AI Chat', path: '/chat', icon: ChatBubbleLeftRightIcon },
  { title: 'Routing Simulator', path: '/routing-simulator', icon: ArrowPathIcon },
  { title: 'Tool Registry', path: '/tool-registry', icon: WrenchScrewdriverIcon },
  { title: 'Health', path: '/deployment/health', icon: HeartIcon },
];

export function Sidebar() {
  const location = useLocation();
  const navigate = useNavigate();

  return (
    <Card className="h-screen w-64 p-4 shadow-xl rounded-none border-r border-[var(--border-color)]">
      <div className="mb-6">
        <Typography variant="h4" color="blue" className="font-bold">
          Hospital IT
        </Typography>
        <Typography variant="small" className="text-[var(--text-secondary)]">
          AI Gateway
        </Typography>
      </div>

      <List>
        {menuItems.map((item) => {
          const Icon = item.icon;
          const isActive = location.pathname === item.path;
          
          return (
            <ListItem
              key={item.path}
              onClick={() => navigate(item.path)}
              className={`sidebar-item ${isActive ? 'sidebar-item-active' : ''}`}
            >
              <ListItemPrefix>
                <Icon className="h-5 w-5" />
              </ListItemPrefix>
              {item.title}
            </ListItem>
          );
        })}
      </List>
    </Card>
  );
}
```

### 3.2 Health Status Card (`src/components/HealthCard.jsx`)

```jsx
import React from 'react';
import { Card, CardBody, Typography, Chip } from '@material-tailwind/react';
import { CheckCircleIcon, ExclamationTriangleIcon } from '@heroicons/react/24/solid';

export function HealthCard({ service, status, uptime, lastCheck, memoryUsage }) {
  const isHealthy = status === 'healthy';
  
  return (
    <Card className="card-elevated hover:shadow-2xl transition-shadow duration-300">
      <CardBody>
        <div className="flex items-start justify-between mb-4">
          <div>
            <Typography variant="h5" className="font-bold mb-1">
              {service}
            </Typography>
            <Typography variant="small" className="text-[var(--text-secondary)]">
              Last Check: {lastCheck}
            </Typography>
          </div>
          <Chip
            value={status}
            color={isHealthy ? 'green' : 'red'}
            icon={
              isHealthy ? (
                <CheckCircleIcon className="h-4 w-4" />
              ) : (
                <ExclamationTriangleIcon className="h-4 w-4" />
              )
            }
          />
        </div>

        <div className="space-y-2">
          <div className="flex justify-between">
            <Typography variant="small">Uptime</Typography>
            <Typography variant="small" className="font-semibold">
              {uptime}
            </Typography>
          </div>
          
          {memoryUsage && (
            <div>
              <div className="flex justify-between mb-1">
                <Typography variant="small">Memory Usage</Typography>
                <Typography variant="small">{memoryUsage}</Typography>
              </div>
              <div className="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                <div
                  className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                  style={{ width: memoryUsage }}
                />
              </div>
            </div>
          )}
        </div>
      </CardBody>
    </Card>
  );
}
```

## Phase 4: Testing & Quality Assurance

### 4.1 Create Test Suite (`src/tests/ui-validation.test.js`)

```javascript
import { render, screen } from '@testing-library/react';
import '@testing-library/jest-dom';
import axe from '@axe-core/react';

describe('UI/UX Validation', () => {
  test('should not have accessibility violations', async () => {
    const { container } = render(<App />);
    const results = await axe(container);
    expect(results).toHaveNoViolations();
  });

  test('should render all navigation items', () => {
    render(<Sidebar />);
    expect(screen.getByText('Dashboard')).toBeInTheDocument();
    expect(screen.getByText('AI Chat')).toBeInTheDocument();
  });

  test('should apply dark mode correctly', () => {
    const { container } = render(<App />);
    document.documentElement.classList.add('dark');
    expect(container.firstChild).toHaveClass('dark');
  });
});
```

### 4.2 Visual Regression Testing

```bash
npm install --save-dev @storybook/react @storybook/addon-a11y
npx storybook init
```

### 4.3 Manual Testing Checklist

```markdown
## UX/UI Validation Checklist

### Visual Design
- [ ] Color contrast ratio ≥ 4.5:1 (WCAG AA)
- [ ] Consistent spacing (8px grid system)
- [ ] Typography hierarchy clear
- [ ] Icons aligned and properly sized
- [ ] No overlapping elements in flex layouts
- [ ] Responsive at 320px, 768px, 1024px, 1920px

### Interaction Design
- [ ] Hover states on all interactive elements
- [ ] Focus indicators visible (keyboard navigation)
- [ ] Loading states implemented
- [ ] Error states handled gracefully
- [ ] Success feedback provided
- [ ] Animations smooth (60fps)

### Accessibility (WCAG 2.1 Level AA)
- [ ] Semantic HTML structure
- [ ] ARIA labels where needed
- [ ] Keyboard navigation works
- [ ] Screen reader compatible
- [ ] Skip links implemented
- [ ] Color not sole indicator

### Dark/Light Mode
- [ ] All colors defined in both themes
- [ ] Images/icons visible in both modes
- [ ] Transitions smooth
- [ ] Custom colors persist across modes
- [ ] No color bleeding or artifacts

### Performance
- [ ] First Contentful Paint < 1.8s
- [ ] Time to Interactive < 3.8s
- [ ] No layout shift (CLS < 0.1)
- [ ] Optimized images (WebP/AVIF)
- [ ] Code splitting implemented
```

## Phase 5: Migration Execution Plan

### Step 1: Backup & Branch

```bash
git checkout -b feature/material-tailwind-migration
git add .
git commit -m "Backup before Material Tailwind migration"
```

### Step 2: Install & Configure (Execute Phase 1 tasks)

### Step 3: Create Theme System (Execute Phase 2 tasks)

### Step 4: Refactor Components One-by-One

Priority order:

1. Layout components (Sidebar, Header, Footer)
2. Common components (Cards, Buttons, Inputs)
3. Feature components (Chat, Routing Simulator)
4. Complex components (Dashboard, Health Monitoring)

### Step 5: Implement Testing (Execute Phase 4 tasks)

### Step 6: Cleanup

```bash
# Remove old Argon files
find ./src -name "*argon*" -type f -delete
find ./src -name "*old*" -type f -delete

# Remove unused dependencies
npm uninstall argon-dashboard-react bootstrap reactstrap

# Clean up
npm prune
npm dedupe
```

### Step 7: Final Verification

- Run all tests
- Perform manual testing with checklist
- Test on multiple devices/browsers
- Verify theme customization & persistence
- Check database integration
- Validate performance metrics

## API Endpoint for Theme Persistence

```javascript
// backend/routes/userPreferences.js
router.post('/api/user-preferences', async (req, res) => {
  const { userId, theme } = req.body;
  
  await db.userPreferences.upsert({
    where: { userId },
    update: { theme },
    create: { userId, theme },
  });
  
  res.json({ success: true });
});

router.get('/api/user-preferences/:userId', async (req, res) => {
  const preferences = await db.userPreferences.findUnique({
    where: { userId: req.params.userId },
  });
  
  res.json(preferences);
});
```

## Expected Deliverables

1. ✅ Fully migrated to Material Tailwind
2. ✅ Unified styling system (app.css + tailwind.config)
3. ✅ Dark/Light mode with smooth transitions
4. ✅ Theme customizer with database persistence
5. ✅ All components refactored with new design system
6. ✅ Comprehensive test coverage
7. ✅ WCAG 2.1 AA compliance
8. ✅ Clean codebase (no legacy files)
9. ✅ Performance optimized
10. ✅ Documentation updated

## Success Metrics

- Lighthouse Score: >90 (all categories)
- Accessibility Score: 100
- No console errors/warnings
- Theme switch < 200ms
- Component render < 16ms (60fps)
- Bundle size reduced by >30%

```

---

**Hướng dẫn sử dụng prompt này:**

1. Copy toàn bộ prompt trên
2. Paste vào GitHub Copilot Chat
3. Chọn model Claude Opus 4.5
4. Copilot sẽ thực hiện từng phase một cách có hệ thống
5. Review và test sau mỗi phase trước khi tiếp tục

Prompt này đã được cấu trúc để Copilot có thể:
- Hiểu rõ context và mục tiêu
- Thực hiện từng bước có kiểm soát
- Tự động test và validate
- Cleanup code cũ
- Đảm bảo standards quốc tế (WCAG, Web Vitals)
